(this.webpackJsonpgafive=this.webpackJsonpgafive||[]).push([[0],{209:function(e,t,n){e.exports=n.p+"static/media/correct.8e3d6124.mp3"},210:function(e,t,n){e.exports=n.p+"static/media/wrong.43b2d487.wav"},213:function(e,t,n){e.exports=n(790)},218:function(e,t,n){},790:function(e,t,n){"use strict";n.r(t);var a=n(0),s=n.n(a),r=n(80),l=n.n(r),i=(n(218),n(41)),o=n(42),c=n(45),u=n(43),m=n(44),d=n(27),p={aws_project_region:"us-east-1",aws_appsync_graphqlEndpoint:"https://hkw5m5bzjnas3iy55rofoibh2a.appsync-api.us-east-1.amazonaws.com/graphql",aws_appsync_region:"us-east-1",aws_appsync_authenticationType:"AMAZON_COGNITO_USER_POOLS",Auth:{region:"us-east-1",userPoolId:"us-east-1_B78sn82ah",userPoolWebClientId:"7nca7db89qqeddmt2rh90587c5"}},h=n(17),E=n(46),y=n(794),g=n(795),v=n(203),f=n(801),x=n(38),b=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={loading:!1,round:0,lastFinishedIndex:-2,timeoutValue:30},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return-2===this.state.lastFinishedIndex?s.a.createElement(x.a,{query:Object(d.c)("query QueryLastestIndex($round: Int) {\n  queryLastestIndex(round: $round) {\n    items {\n      id\n      username\n      timestamp\n      itemId\n      response\n      result\n      round\n      genre\n    }\n    nextToken\n  }\n}\n",{})},(function(t){var n=t.data,a=t.loading,r=t.errors;if(console.log("rendering 1",n,a,r),a||!n)return s.a.createElement("h3",null,"Loading...");if(r.lenth>0)return s.a.createElement("h3",null,"Error");console.log("rendering 2",n,a,r);var l=n[Object.keys(n)[0]];0===l.items.length?e.setState({lastFinishedIndex:0,round:1}):e.setState({lastFinishedIndex:l.items[0].itemId,round:l.items[0].round})})):s.a.createElement(y.a,null,s.a.createElement(g.a,null,s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"goover"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:{pathname:"/execise",execiseProps:{flowStep:"goover",round:1,lastFinishedIndex:this.state.lastFinishedIndex,timeoutValue:this.state.timeoutValue}}},"Review")))),s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"study"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:{pathname:"/execise",execiseProps:{flowStep:"study",round:1,lastFinishedIndex:this.state.lastFinishedIndex,timeoutValue:this.state.timeoutValue}}},"Study")))),s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"trends"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"/trends"},"Trends")))),s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"setting"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"/settings"},"Settings"))))))}}]),t}(a.Component),w=(n(62),n(796)),k=function(){return s.a.createElement("div",{className:"d-flex justify-content-center align-items-center"},s.a.createElement(w.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),"Loading...")},O=function(e){var t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+n+"-"+t},S=function(e){return O(e)+"T"+function(e){return String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart("2",0)+"Z"}(e)},I=function(e,t){return Math.random()>.5?-1:1},j=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={username:"",loading:!0},n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;d.a.currentAuthenticatedUser({bypassCache:!1}).then((function(t){e.setState({username:t.username})}))}},{key:"render",value:function(){return""===this.state.username?s.a.createElement(y.a,null,s.a.createElement(k,null)):s.a.createElement(y.a,null,s.a.createElement(g.a,null,s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"trends"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"/"},"Home")))),s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"setting"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"#",onClick:function(){return d.a.signOut()}},"Sign Out ",this.username))))))}}]),t}(a.Component),C=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(y.a,{className:"mx-auto"},s.a.createElement(g.a,null,s.a.createElement(v.a,{className:"mx-auto"},s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"goover"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:{pathname:"/execise",execiseProps:{flowStep:"goover",firstTime:!1}}},"Go Over"))))),s.a.createElement(g.a,null,s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"audit"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:{pathname:"/execise",execiseProps:{flowStep:"audit",round:1}}},"Correction Check"))))),s.a.createElement(g.a,null,s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"new"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"/execise"},"New"))))),s.a.createElement(g.a,null,s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"trends"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"/execise"},"Try Again"))))),s.a.createElement(g.a,null,s.a.createElement(v.a,null,s.a.createElement(f.a,{className:"mt-1",style:{width:"18rem"},key:"trends"},s.a.createElement(f.a.Body,null,s.a.createElement(f.a.Link,{as:h.b,to:"/summarise"},"Summarises"))))))}}]),t}(a.Component),N=n(67),H=n.n(N),L=n(116),B=n(65),T="mutation CreateGafiveHistory($input: CreateGafiveHistoryInput!) {\n  createGafiveHistory(input: $input) {\n    id\n    timestamp\n    itemId\n    response\n    result\n    round\n    genre\n  }\n}\n",A="mutation UpdateGafiveHistory($input: UpdateGafiveHistoryInput!) {\n  updateGafiveHistory(input: $input) {\n    id\n    username\n    timestamp\n    itemId\n    response\n    result\n    round\n    genre\n  }\n}\n",$=n(206),P=n(802),F=function(e){var t={labels:["Correct","Wrong"],datasets:[{data:[0,0],backgroundColor:["#60ACFB","#AFE39B"],hoverBackgroundColor:["#60ACFB","#AFE39B"]}]};console.log("ResultPie: result - ",e.results);for(var n=e.results.length,a=0,r=0;r<e.results.length;r++)!0===e.results[r]&&a++;return t.datasets[0].data[0]=a,t.datasets[0].data[1]=n-a,s.a.createElement(y.a,null,s.a.createElement("h4",{className:"text-center"},e.title),s.a.createElement($.a,{data:t}),s.a.createElement(g.a,null,s.a.createElement(v.a,null),s.a.createElement(v.a,null,s.a.createElement("ul",null,s.a.createElement("li",null,"Correct: ",a),s.a.createElement("li",null,"Wrong: ",n-a))),s.a.createElement(v.a,null)),s.a.createElement(g.a,null,s.a.createElement(v.a,{xs:6},s.a.createElement(P.a,{style:{marginLeft:"auto"},as:h.b,to:e.nextUrl},"Back")),s.a.createElement(v.a,{className:"mx-auto"},s.a.createElement("div",null))))},D=n(797),q=function(e){if(null==e.results)return s.a.createElement("div",null);var t=e.results,n=0;if(t.length>16){var a=e.results.indexOf("-");t=a>=16?16*((n=parseInt(a/16))+1)>=t.length?e.results.slice(16*n):e.results.slice(16*n,16*(n+1)):e.results.slice(0,16)}return s.a.createElement("div",{className:"bg-light",style:{display:"block"}},s.a.createElement(D.a,null,t.map((function(e,t){return s.a.createElement(P.a,{variant:"-"===e?"secondary":!0===e?"success":"danger",size:"sm",key:t,className:"mr-1"},16*n+t+1)}))))},G=n(799),_=n(798),U=n(800),V=function(e){var t=function(e){var t=e.contents,n=[t.A,t.B,t.C,t.D];return s.a.createElement("fieldset",null,s.a.createElement(G.a.Group,{as:g.a},s.a.createElement(v.a,{sm:10},n.map((function(t){return s.a.createElement(G.a.Check,{type:"radio",label:t,name:"answer",id:t,value:t,onChange:e.handleOptionChange,checked:e.selectedOption===t,key:t,disabled:"Next"===e.buttonText})})))))};return s.a.createElement("div",null,s.a.createElement((function(){return s.a.createElement("div",{className:"text-white bg-dark px-2"},"GA500 index ".concat(e.contents.index))}),null),s.a.createElement((function(e){var n=e.contents;return null==n?s.a.createElement("div",null):s.a.createElement(_.a,null,s.a.createElement("h5",null," ",n.base," "),s.a.createElement("br",null),s.a.createElement(t,{contents:n,selectedOption:e.selectedOption,handleOptionChange:e.handleOptionChange,buttonText:e.buttonText}))}),{contents:e.contents,selectedOption:e.selectedOption,handleOptionChange:e.handleOptionChange}),s.a.createElement(g.a,null,s.a.createElement(v.a,{xs:6},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(P.a,{style:{marginLeft:"auto"},id:"submit",onClick:e.onClick,disabled:"Submit"!==e.buttonText},"Submit "))),s.a.createElement(v.a,{xs:6},s.a.createElement("div",{style:{display:"flex"}},s.a.createElement(P.a,{style:{marginLeft:"auto"},id:"next",onClick:e.onClick,disabled:"Next"!==e.buttonText},"Next ")))),s.a.createElement(g.a,null,s.a.createElement((function(e){var t=[" "," "];return null!=e.translation&&(t=e.translation.split("/")),e.show?e.positive?s.a.createElement("div",null,s.a.createElement("div",{id:"hint"},s.a.createElement("p",{className:"text-success"},"Correct! "),e.content),s.a.createElement("hr",null),s.a.createElement("div",null,t.map((function(e,t){return s.a.createElement("p",{id:t},e)})))):s.a.createElement("div",null,s.a.createElement("div",{id:"hint"},s.a.createElement("p",null," ",s.a.createElement("font",{className:"text-danger"},"Not correct! "),'The answer is "',e.answer,'"'),e.content),s.a.createElement("hr",null),s.a.createElement("div",null,t.map((function(e,t){return s.a.createElement("p",{id:t},e)})))):s.a.createElement(U.a,{in:!1},s.a.createElement("div",{id:"hint"}))}),{show:"Next"===e.buttonText,content:e.contents.Hint,positive:e.selectedOption===e.contents.Answer,answer:e.contents.Answer,translation:e.contents.translation})))},M=n(209),Q=n.n(M),R=n(210),W=n.n(R),z=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(){var e=n.state.items[n.state.currentIndex];if("Next"===n.state.buttonText){if(n.state.currentIndex+1<n.state.items.length){var t=n.state.items[n.state.currentIndex+1];console.log("handleSubmit: nextItem-",t),"Maths"===t.type||"Pattern"===t.type||"Logic"===t.type?n.setState({remainSeconds:150}):n.setState({remainSeconds:n.props.location.execiseProps.timeoutValue})}n.setState({selectedOption:"",buttonText:"Submit"}),n.setState({currentIndex:n.state.currentIndex+1}),n.resetCoundDown()}else n.state.selectedOption.length>0&&(n.setState({buttonText:"Next",remainSeconds:""}),clearInterval(n.interval),n.state.results[n.state.currentIndex]=n.state.selectedOption===e.Answer,n.state.selectedOption===e.Answer?n.playPositiveSnd():n.playNegativeSnd(),n.addHistory(n.state.sendHistory,n.state.selectedOption),""!==n.state.items[n.state.currentIndex].historyId&&n.updateHistoryReviewed(n.state.updateHistory,n.state.items[n.state.currentIndex].historyId))},n.handleOptionChange=function(e){n.setState({selectedOption:e.target.value})},n.resetCoundDown=function(){clearInterval(n.interval),n.interval=setInterval(n.tick,1e3)},n.timesUp=function(){""===n.state.selectedOption&&n.setState({selectedOption:"Not answered"}),n.handleSubmit()},n.tick=function(){if(""===n.state.remainSeconds)clearInterval(n.interval);else{var e=n.state.remainSeconds-1;n.setState({remainSeconds:e}),e<=0&&(clearInterval(n.interval),n.timesUp())}},n.organiseDate=function(e,t){var a=Object.keys(t)[0],r=t[a];switch(console.log("Execise: organiseData flowType ",e,", data type - ",a,", data length - ",t.length),e){case"study":if("queryQuestionsByIndex"!==a)return console.log("Execise: Expected <study> Items, but got type - ",a),s.a.createElement("div",null);n.state.flowStep="done";break;case"goover":if("getHistoryItemsList"!==a)return console.log("Execise: Expected <goover> items, but got type - ",a),s.a.createElement("div",null);n.state.flowStep="done"}var l=n.state.items.length,i=new Date;O(i);if("done"===n.state.flowStep&&n.state.items.length>0){var o=n.state.items[0].type;"Maths"!==o&&"Pattern"!==o&&"Logic"!==o||(console.log("firt time is maths, set timer to 150"),n.state.remainSeconds=150)}for(var c=0;c<r.items.length;c++){switch(a){case"queryQuestionsByIndex":n.state.items[l+c]=r.items[c],n.state.items[l+c].historyId="",n.state.items[l+c].round=1;break;case"getHistoryItemsList":n.state.items[l+c]=r.items[c].content,n.state.items[l+c].historyId=r.items[c].id,n.state.items[l+c].round=r.items[c].round+1,n.state.items[l+c].index=r.items[c].itemId}n.state.results[l+c]="-",n.shuffleItemAnswers(l+c)}},n.state={items:[],results:[],currentIndex:0,mounted:!1,sendHistory:null,updateHistory:null,buttonText:"Submit",selectedOption:"",loading:!0,flowStep:n.props.location.execiseProps.flowStep,round:n.props.location.execiseProps.round,remainSeconds:n.props.location.execiseProps.timeoutValue},n.playPositiveSnd=n.playPositiveSnd.bind(Object(B.a)(n)),n.positiveSnd=new Audio(Q.a),n.playNegativeSnd=n.playNegativeSnd.bind(Object(B.a)(n)),n.negativeSnd=new Audio(W.a),n}return Object(m.a)(t,e),Object(o.a)(t,[{key:"playPositiveSnd",value:function(){this.positiveSnd.play()}},{key:"playNegativeSnd",value:function(){this.negativeSnd.play()}},{key:"addHistory",value:function(){var e=Object(L.a)(H.a.mark((function e(t,n){var a,s,r;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.state.items[this.state.currentIndex],s=new Date,r={timestamp:S(s),itemId:a.index,response:n,result:n===a.Answer,round:a.round,genre:"test"},e.prev=3,console.log("addHistory:",r),e.next=7,t({input:r});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[3,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateHistoryReviewed",value:function(){var e=Object(L.a)(H.a.mark((function e(t,n){var a;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={id:n,genre:"reviewed"},e.prev=1,e.next=4,t({input:a});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"shuffleItemAnswers",value:function(e){var t=this.state.items[e],n=[t.A,t.B,t.C,t.D];n.sort(I),this.state.items[e].A=n[0],this.state.items[e].B=n[1],this.state.items[e].C=n[2],this.state.items[e].D=n[3]}},{key:"componentDidMount",value:function(){console.log("exec flow step:",this.props.location.execiseProps),this.state.mounted=!0,this.interval=setInterval(this.tick,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;if("done"===this.state.flowStep){if(this.state.currentIndex>=this.state.items.length){var t=O(new Date);return s.a.createElement(F,{title:t,results:this.state.results,nextUrl:"/"})}return s.a.createElement(y.a,null,s.a.createElement(q,{results:this.state.results}),s.a.createElement(V,{contents:this.state.items[this.state.currentIndex],handleOptionChange:this.handleOptionChange,selectedOption:this.state.selectedOption,onClick:this.handleSubmit,buttonText:this.state.buttonText}),s.a.createElement("div",null,this.state.remainSeconds))}if(!this.state.mounted)return s.a.createElement(y.a,null," Loading ");switch(this.state.flowStep){case"study":return s.a.createElement("div",null,s.a.createElement(x.a,{mutation:Object(d.c)(T)},(function(t){var n=t.mutation;e.state.sendHistory=n,console.log("sendHistory assigned.")})),s.a.createElement(x.a,{mutation:Object(d.c)(A)},(function(t){var n=t.mutation;e.state.updateHistory=n,console.log("updateHistory assigned.")})),s.a.createElement(x.a,{query:Object(d.c)("query QueryQuestionsByIndex($index: Int!, $limit: Int, $nextToken: String) {\n  queryQuestionsByIndex(index: $index, limit: $limit, nextToken: $nextToken) {\n    items {\n      idx\n      index\n      base\n      A\n      B\n      C\n      D\n      Answer\n      Hint\n      translation\n      type\n    }\n    nextToken\n  }\n}\n",{index:this.props.location.execiseProps.lastFinishedIndex,limit:100})},(function(t){var n=t.data,a=t.loading,r=t.errors;return a||!n?s.a.createElement("h3",null,"Loading..."):r.lenth>0?s.a.createElement("h3",null,"Error"):(e.organiseDate("study",n),void console.log("result array: ",e.state.results))})));case"goover":return s.a.createElement("div",null,s.a.createElement(x.a,{mutation:Object(d.c)(T)},(function(t){var n=t.mutation;e.state.sendHistory=n,console.log("sendHistory assigned.")})),s.a.createElement(x.a,{mutation:Object(d.c)(A)},(function(t){var n=t.mutation;e.state.updateHistory=n,console.log("updateHistory assigned.")})),s.a.createElement(x.a,{query:Object(d.c)("query GetHistoryItemsList(\n  $startFrom: String\n  $acsending: Boolean\n  $limit: Int\n  $filter: TableGafiveHistoryFilterInput\n  $nextToken: String\n) {\n  getHistoryItemsList(\n    startFrom: $startFrom\n    acsending: $acsending\n    limit: $limit\n    filter: $filter\n    nextToken: $nextToken\n  ) {\n    items {\n      id\n      username\n      timestamp\n      itemId\n      response\n      result\n      round\n      genre\n      content {\n        base\n        A\n        B\n        C\n        D\n        Answer\n        Hint\n        translation\n        type\n      }\n    }\n    nextToken\n  }\n}\n",{filter:{result:{eq:!1},round:{eq:1}},limit:1e3})},(function(t){var n=t.data,a=t.loading,r=t.errors;return a||!n?s.a.createElement("h3",null,"Loading..."):r.lenth>0?s.a.createElement("h3",null,"Error"):(e.organiseDate("goover",n),void console.log("result array: ",e.state.results))})));default:return s.a.createElement("div",null)}}}]),t}(a.Component),J=Object(E.f)(z);d.b.configure(p);var Z=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return d.b.Logger.LOG_LEVEL="VERBOSE",s.a.createElement(h.a,{basename:"/gafive"},s.a.createElement(E.c,null,s.a.createElement(E.a,{path:"/settings",component:j}),s.a.createElement(E.a,{path:"/workflow",component:C}),s.a.createElement(E.a,{path:"/execise",component:J}),s.a.createElement(E.a,{path:"/",component:b})))}}]),t}(a.Component),Y=Object(x.b)(Z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},90:function(e,t){},96:function(e,t){}},[[213,1,2]]]);
//# sourceMappingURL=main.fa8f056d.chunk.js.map